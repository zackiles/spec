..
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Spec API</title>

    <!-- Bootstrap core CSS -->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <a class="navbar-brand" href="#">Spec API</a>
      </div>
    </div>

    <div class="container">

      <h1>GET api/events</h1>
      <p class="lead">Returns the events in the given time period and in given filters.</p>

      <table class="table table-hover">
        <thead>
          <tr>
            <th>Parameters</th>
            <th>Explanation</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              start
              <p class="text-muted">optional</p>
            </td>
            <td>
              Takes UNIX timestamp. Defaults to now if not specified.
              <p class="text-success"><strong>Example:</strong> <a href="../api/events?start=1388034000">?start=1388034000</a></p>
            </td>
          </tr>
          <tr>
            <td>
              end
              <p class="text-muted">optional</p>
            </td>
            <td>
              Takes UNIX timestamp. Defaults start + 30 minutes if not specified. If start is not specified either, it becomes now + 30 minutes.
              <p class="text-success"><strong>Example:</strong> <a href="../api/events?end=1391662800">?end=1391662800</a></p>
            </td>
          </tr>
          <tr>
            <td>
              minutes
              <p class="text-muted">optional</p>
            </td>
            <td>
              Takes minutes. Overwrites both <strong>start</strong> and <strong>end</strong> and just returns the events in the next given minutes.
              <p class="text-success"><strong>Example:</strong> <a href="../api/events?minutes=60">?minutes=60</a></p>
            </td>
          </tr>
          <tr>
            <td>
              filter
              <p class="text-muted">optional</p>
            </td>
            <td>
              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>Filter Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                 <tr>
                    <td>hideCancelled</td>
                    <td>Returns all uncancelled events in the given period. <strong>If no filter is specified in the request, this is the default one.</strong></td>
                  </tr>
                  <tr>
                    <td>all</td>
                    <td>Returns all events in the given period.</td>
                  </tr>
                  <tr>
                    <td>unstaffed</td>
                    <td>Returns all unstaffed or partially staffed events in the given period.</td>
                  </tr>
                  <tr>
                    <td>video</td>
                    <td>Returns all video events in the given period.</td>
                  </tr>
                </tbody>
              </table>
              <p class="text-success"><strong>Example:</strong> <a href="../api/events?filter=video">?filter=video</a></p>
            </td>
          </tr>
        </tbody>
      </table>

      <h4>Example Request</h4>
       <table class="table table-hover">
        <tbody>
          <tr>
            <td>
              <strong>GET</strong>
            </td>
            <td>
              /api/events/?minutes=2000
            </td>
          </tr>
        </tbody>
      </table>
      <pre class="prettyprint lang-javascript">
[{
    XMLid: 1435616,
    title: "Varsity Swim vs Bowdoin, Colby and Trinity",
    desc: "Client will be contacted directly by IMS",
    category: "A",
    loc: "FAC Pool",
    start: "2014-01-25T16:00:00.000Z",
    end: "2014-01-25T21:00:00.000Z",
    eventStart: "2014-01-25T17:00:00.000Z",
    eventEnd: "2014-01-25T21:00:00.000Z",
    cancelled: false,
    techMustStay: true,
    video: true,
    customer: {
        name: "Solomon, Peter Gordon",
        phone: "xxxx"
    },
    inventory: [],
    notes: [{
        id: "52e2868eea76b64265000001",
        text: "this is a note",
        user: "ckorkut",
        date: "2014-01-24T15:28:14.742Z"
    }],
    shifts: [],
    staffNeeded: 1,
    onHold: false,
    _id: "52d40fa6cc5ea0506b00009c"
}, {
    XMLid: 1461265,
    title: "Training: WesGUIDE Coaches",
    desc: "This will be video recorded by IMS. Single camera, \&quot;nothing special\&quot; according to the customer.",
    category: "B",
    loc: "Judd 113",
    start: "2014-01-25T17:25:00.000Z",
    end: "2014-01-25T22:05:00.000Z",
    eventStart: "2014-01-25T18:00:00.000Z",
    eventEnd: "2014-01-25T22:00:00.000Z",
    cancelled: false,
    techMustStay: true,
    video: true,
    customer: {
        name: "O&apos;Brien, Setareh Margaret",
        phone: "858/531-9043"
    },
    inventory: [],
    notes: [],
    shifts: [],
    staffNeeded: 1,
    onHold: false,
    _id: "52d9822acc5ea0506b0000a7"
}, {
    XMLid: 1464233,
    _id: "52e02da02194810212000002",
    cancelled: false,
    category: "A",
    customer: {
        name: "Prometheus",
        phone: {}
    },
    desc: "At 8:45am, please provide a tech to set-up the existing sound system in Beckham Hall. The group will need to be able to hook up an ipod. Please return at the end of the day to secure all equipment.",
    end: "2014-01-26T04:00:00.000Z",
    eventEnd: "2014-01-25T06:00:00.000Z",
    eventStart: "2014-01-25T15:00:00.000Z",
    inventory: [],
    loc: "Fayerweather 202 &amp;&#35;40;Beckham Hall&#41;",
    notes: [],
    shifts: [],
    staffNeeded: 1,
    start: "2014-01-25T13:45:00.000Z",
    techMustStay: true,
    title: "Conference: Winter Fire Arts",
    video: false,
    onHold: false
}, {
    XMLid: 1464054,
    _id: "52e02da02194810212000003",
    cancelled: false,
    category: "A",
    customer: {
        name: "Reilly, Joseph P.",
        phone: 2918
    },
    desc: "Client will be contacted directly by IMS",
    end: "2014-01-25T23:00:00.000Z",
    eventEnd: "2014-01-25T23:00:00.000Z",
    eventStart: "2014-01-25T21:00:00.000Z",
    inventory: [
      {
        item: "0",
        amt: 1
      }
    ],
    loc: "Silloway Gymnasium",
    notes: [],
    shifts: [{
        id: "52e049adb9d6304418000001",
        start: "2014-01-25T20:00:00.000Z",
        end: "2014-01-25T23:00:00.000Z",
        staff: "ckorkut"
    }],
    staffNeeded: 1,
    start: "2014-01-25T20:00:00.000Z",
    techMustStay: true,
    title: "Varsity Men&apos;s Basketball vs Conn",
    video: true,
    onHold: false
}]
      </pre>
    <h4>Fields</h4>
       <table class="table table-hover">
        <thead>
          <tr>
            <th>Fields</th>
            <th>Type</th>
            <th>Explanation</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <strong>XMLid</strong>
            </td>
            <td>
              <strong>Integer</strong>
            </td>
            <td>
              The Service_x0020_Order_x0020_Detail_x0020_ID value generated by XML export from EMS. Used as a unique ID for events.
            </td>
          </tr>
          <tr>
            <td>
              <strong>_id</strong>
            </td>
            <td>
              <strong>String</strong>
            </td>
            <td>
              The unique id, used as the main unique field in Spec. In MongoDB ObjectID format.
            </td>
          </tr>
          
          <tr>
            <td>
              <strong>title</strong>
            </td>
            <td>
              <strong>String</strong>
            </td>
            <td>
              Event title.
            </td>
          </tr>
          <tr>
            <td>
              <strong>desc</strong>
            </td>
            <td>
              <strong>String</strong>
            </td>
            <td>
              Event description.
            </td>
          </tr>
          <tr>
            <td>
              <strong>category</strong>
            </td>
            <td>
              <strong>String</strong>
            </td>
            <td>
              Event category. Either "A", "B" or "C". Contact special event managers for the specifications.
            </td>
          </tr>
          <tr>
            <td>
              <strong>loc</strong>
            </td>
            <td>
              <strong>String</strong>
            </td>
            <td>
              Event location.
            </td>
          </tr>
          <tr>
            <td>
              <strong>start</strong>
            </td>
            <td>
              <strong>String (Date)</strong>
            </td>
            <td>
              The time that shows the start of the time that the customer requested a tech staff.
            </td>
          </tr>
          <tr>
            <td>
              <strong>end</strong>
            </td>
            <td>
              <strong>String (Date)</strong>
            </td>
            <td>
              The time that shows the end of the time that the customer requested a tech staff.
            </td>
          </tr>
          <tr>
            <td>
              <strong>eventStart</strong>
            </td>
            <td>
              <strong>String (Date)</strong>
            </td>
            <td>
              The time that the event itself starts.
            </td>
          </tr>
          <tr>
            <td>
              <strong>eventEnd</strong>
            </td>
            <td>
              <strong>String (Date)</strong>
            </td>
            <td>
              The time that the event itself ends.
            </td>
          </tr>
          <tr>
            <td>
              <strong>cancelled</strong>
            </td>
            <td>
              <strong>Boolean</strong>
            </td>
            <td>
              Shows if the event is cancelled or not.
            </td>
          </tr>
          <tr>
            <td>
              <strong>techMustStay</strong>
            </td>
            <td>
              <strong>Boolean</strong>
            </td>
            <td>
              Shows if the tech staff assigned must stay during the event.
            </td>
          </tr>
          <tr>
            <td>
              <strong>video</strong>
            </td>
            <td>
              <strong>Boolean</strong>
            </td>
            <td>
              Shows if the event is a video or not.
            </td>
          </tr>
          <tr>
            <td>
              <strong>customer</strong>
            </td>
            <td>
              <strong>Object</strong>
            </td>
            <td>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Fields</th>
                    <th>Type</th>
                    <th>Explanation</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <strong>name</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      Customer name.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>phone</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      Customer phone number.
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <strong>notes</strong>
            </td>
            <td>
              <strong>Array of objects</strong>
            </td>
            <td>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Fields</th>
                    <th>Type</th>
                    <th>Explanation</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <strong>id</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      Unique ID for the note. In MongoDB ObjectID format.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>text</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      The note text itself.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>user</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      The owner of the note.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>date</strong>
                    </td>
                    <td>
                      <strong>String (Date)</strong>
                    </td>
                    <td>
                      When the note is created.
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <strong>shifts</strong>
            </td>
            <td>
              <strong>Array of objects</strong>
            </td>
            <td>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Fields</th>
                    <th>Type</th>
                    <th>Explanation</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <strong>id</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      Unique ID for the shift. In MongoDB ObjectID format.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>start</strong>
                    </td>
                    <td>
                      <strong>String (Date)</strong>
                    </td>
                    <td>
                      When the shifts starts.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>end</strong>
                    </td>
                    <td>
                      <strong>String (Date)</strong>
                    </td>
                    <td>
                      When the shift ends.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>staff</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      The Wesleyan user name of the staff assigned to the shift. Can be an empty string is it is an empty shift.
                    </td>
                  </tr>
                  
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <strong>staffNeeded</strong>
            </td>
            <td>
              <strong>Integer</strong>
            </td>
            <td>
              The number of staff needed for the event. Set by managers.
            </td>
          </tr>
          <tr>
            <td>
              <strong>inventory</strong>
            </td>
            <td>
              <strong>Array of objects</strong>
            </td>
            <td>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Fields</th>
                    <th>Type</th>
                    <th>Explanation</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <strong>item</strong>
                    </td>
                    <td>
                      <strong>String</strong>
                    </td>
                    <td>
                      The inventory needed for the event. Strings contain numbers that indicate what the inventory item is. Inventory list needed to determine what item it is.
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <strong>amt</strong>
                    </td>
                    <td>
                      <strong>Integer</strong>
                    </td>
                    <td>
                      The amount of the item.
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <strong>onHold</strong>
            </td>
            <td>
              <strong>Boolean</strong>
            </td>
            <td>
              True if the event has been added to EMS without three days in advance. Affects automatic staff assignments and manager decisions.
            </td>
          </tr>
        </tbody>
      </table>
      <div class="well">
      <h4>How to handle date strings</h4>
        String (Date) types are all standard ISO date strings. Therefore, in JavaScript, this creates a valid Date object from an ISO date string:
        <pre class="prettyprint lang-javascript">
new Date('2014-01-24T15:38:49.862Z')
        </pre>
        If you need to parse a date into UNIX timestamp, you can use this:
                <pre class="prettyprint lang-javascript">
Date.parse('2014-01-24T15:38:49.862Z')
        </pre>
      </div>
    </div><!-- /.container -->
    <div class="container" style="margin-top:60px">
       <p class="text-muted">Wesleyan University Instructional Media Services - Special Events Calendar (Spec).</p>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=javascript"></script>
  </body>
</html>
