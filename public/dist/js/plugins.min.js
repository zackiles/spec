/*! Spec 0.1.4 */
!function(a){var b=function(b,c){this.options=a.extend({},a.fn.combobox.defaults,c),this.$source=a(b),this.$container=this.setup(),this.$element=this.$container.find("input[type=text]"),this.$target=this.$container.find("input[type=hidden]"),this.$button=this.$container.find(".dropdown-toggle"),this.$menu=a(this.options.menu).appendTo("body"),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.shown=!1,this.selected=!1,this.refresh(),this.transferAttributes(),this.listen()};b.prototype=a.extend({},a.fn.typeahead.Constructor.prototype,{constructor:b,setup:function(){var b=a(this.options.template);return this.$source.before(b),this.$source.hide(),b},parse:function(){var b=this,c={},d=[],e=!1;return this.$source.find("option").each(function(){var f=a(this);return""===f.val()?void(b.options.placeholder=f.text()):(c[f.text()]=f.val(),d.push(f.text()),void(f.attr("selected")&&(e=f.html())))}),this.map=c,e&&(this.$element.val(e),this.$container.addClass("combobox-selected"),this.selected=!0),d},transferAttributes:function(){this.options.placeholder=this.$source.attr("data-placeholder")||this.options.placeholder,this.$element.attr("placeholder",this.options.placeholder),this.$target.prop("name",this.$source.prop("name")),this.$source.removeAttr("name"),this.$element.attr("required",this.$source.attr("required")),this.$element.attr("rel",this.$source.attr("rel")),this.$element.attr("title",this.$source.attr("title")),this.$element.attr("class",this.$source.attr("class"))},toggle:function(){this.$container.hasClass("combobox-selected")?(this.clearTarget(),this.triggerChange(),this.clearElement()):this.shown?this.hide():(this.clearElement(),this.lookup())},clearElement:function(){this.$element.val("").focus()},clearTarget:function(){this.$source.val(""),this.$target.val(""),this.$container.removeClass("combobox-selected"),this.selected=!1},triggerChange:function(){this.$source.trigger("change")},refresh:function(){this.source=this.parse(),this.options.items=this.source.length},select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).trigger("change"),this.$source.val(this.map[a]).trigger("change"),this.$target.val(this.map[a]).trigger("change"),this.$container.addClass("combobox-selected"),this.selected=!0,this.hide()},lookup:function(){return this.query=this.$element.val(),this.process(this.source)},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this)),this.$button.on("click",a.proxy(this.toggle,this))},keyup:function(a){switch(a.keyCode){case 40:case 39:case 38:case 37:case 36:case 35:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.clearTarget(),this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(){var a=this;this.focused=!1;var b=this.$element.val();this.selected||""===b||(this.$element.val(""),this.$source.val("").trigger("change"),this.$target.val("").trigger("change")),!this.mousedover&&this.shown&&setTimeout(function(){a.hide()},200)},mouseleave:function(){this.mousedover=!1}}),a.fn.combobox=function(c){return this.each(function(){var d=a(this),e=d.data("combobox"),f="object"==typeof c&&c;e||d.data("combobox",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.combobox.defaults={template:'<div class="combobox-container"><input type="hidden" /><input type="text" autocomplete="off" /><span class="add-on btn dropdown-toggle" data-dropdown="dropdown"><span class="caret"/><span class="combobox-clear"><i class="icon-remove"/></span></span></div>',menu:'<ul class="typeahead typeahead-long dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.combobox.Constructor=b}(window.jQuery),!function(a){var b=function(b,c){this.$elements=a(b),this.options=c,this.before=this.options.before||this.before,this.onItem=this.options.onItem||this.onItem,this.options.target&&this.$elements.attr("data-target",this.options.target),this.listen()};b.prototype={constructor:b,show:function(b){var c,d,e=a(this);if(!e.is(".disabled, :disabled")&&(d=a.Event("context"),this.before.call(this,b,a(b.currentTarget)))){this.$elements.trigger(d),c=this.getMenu();var f=this.getPosition(b,c);return c.attr("style","").css(f).data("_context_this_ref",this).addClass("open"),!1}},closemenu:function(){this.getMenu().removeClass("open")},before:function(){return!0},onItem:function(){return!0},listen:function(){var b=this;this.$elements.on("contextmenu.context.data-api",a.proxy(this.show,this)),a("html").on("click.context.data-api",a.proxy(this.closemenu,this));var c=a(this.$elements.attr("data-target"));c.on("click.context.data-api",function(c){a(this).data("_context_this_ref")==b&&b.onItem.call(this,c,a(c.target))}),a("html").on("click.context.data-api",function(a){a.ctrlKey||c.removeClass("open")})},destroy:function(){this.$elements.off(".context.data-api").removeData("context"),a("html").off(".context.data-api");var b=a(this.$elements.attr("data-target"));b.off(".context.data-api")},getMenu:function(){var b,c=this.$elements.attr("data-target");return c||(c=this.$elements.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,"")),b=a(c)},getPosition:function(b,c){var d,e,f=b.clientX,g=b.clientY,h=a(window).width(),i=a(window).height(),j=c.find(".dropdown-menu").outerWidth(),k=c.find(".dropdown-menu").outerHeight(),l={position:"fixed"};return d=g+k>i?{top:g-k}:{top:g},e=f+j>h&&f-j>0?{left:f-j}:{left:f},a.extend(l,d,e)},clearMenus:function(b){b.ctrlKey||a("[data-toggle=context]").each(function(){this.getMenu().removeClass("open")})}},a.fn.contextmenu=function(a,c){var d=this;return function(){var e=d.data("context"),f="object"==typeof a&&a;e||d.data("context",e=new b(d,f)),"string"==typeof a&&e[a].call(e,c)}()},a.fn.contextmenu.Constructor=b,a(document).on("contextmenu.context.data-api","[data-toggle=context]",function(b){a(this).contextmenu("show",b),b.preventDefault()})}(window.jQuery),!function(a){var b=function(b,d){if(this.element=a(b),this.format=c.parseFormat(d.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=a(c.template).appendTo("body").on({click:a.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=d.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=d.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=d.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=d.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),!this.isInput;var c=this;a(document).on("mousedown",function(b){0==a(b.target).closest(".datepicker").length&&c.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var a=c.formatDate(this.date,this.format);this.isInput?this.element.prop("value",a):(this.component&&this.element.find("input").prop("value",a),this.element.data("date",a))},setValue:function(a){this.date="string"==typeof a?c.parseDate(a,this.format):new Date(a),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},update:function(a){this.date=c.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+c.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+c.dates.monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),d=a.getMonth(),e=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[d]+" "+b);var f=new Date(b,d-1,28,0,0,0,0),g=c.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(g),f.setDate(g-(f.getDay()-this.weekStart+7)%7);var h=new Date(f);h.setDate(h.getDate()+42),h=h.valueOf();for(var i,j,k,l=[];f.valueOf()<h;)f.getDay()===this.weekStart&&l.push("<tr>"),i=this.onRender(f),j=f.getFullYear(),k=f.getMonth(),d>k&&j===b||b>j?i+=" old":(k>d&&j===b||j>b)&&(i+=" new"),f.valueOf()===e&&(i+=" active"),l.push('<td class="day '+i+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&l.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(l.join(""));var m=this.date.getFullYear(),n=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");m===b&&n.eq(this.date.getMonth()).addClass("active"),l="",b=10*parseInt(b/10,10);var o=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var p=-1;11>p;p++)l+='<span class="year'+(-1===p||10===p?" old":"")+(m===b?" active":"")+'">'+b+"</span>",b+=1;o.html(l)},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span, td, th");if(1===d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*("prev"===d[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(d.is(".month")){var e=d.parent().find("span").index(d);this.viewDate.setMonth(e)}else{var f=parseInt(d.text(),10)||0;this.viewDate.setFullYear(f)}0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(d.is(".day")&&!d.is(".disabled")){var g=parseInt(d.text(),10)||1,e=this.viewDate.getMonth();d.is(".old")?e-=1:d.is(".new")&&(e+=1);var f=this.viewDate.getFullYear();this.date=new Date(f,e,g,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,g),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}},a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof c&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof c&&f[c](d)})},a.fn.datepicker.defaults={onRender:function(){return""}},a.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a,b){var c,d=a.split(b.separator),a=new Date;if(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),d.length===b.parts.length){for(var e=a.getFullYear(),f=a.getDate(),g=a.getMonth(),h=0,i=b.parts.length;i>h;h++)switch(c=parseInt(d[h],10)||1,b.parts[h]){case"dd":case"d":f=c,a.setDate(c);break;case"mm":case"m":g=c-1,a.setMonth(c-1);break;case"yy":e=2e3+c,a.setFullYear(2e3+c);break;case"yyyy":e=c,a.setFullYear(c)}a=new Date(e,g,f,0,0,0)}return a},formatDate:function(a,b){var c={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m;for(var a=[],d=0,e=b.parts.length;e>d;d++)a.push(c[b.parts[d]]);return a.join(b.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table></div></div>"}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal-popup"]',"click.dismiss.modal-popup",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".popover-content").load(this.options.remote),this.$parent=c.$parent};b.prototype=a.extend({},a.fn.modal.Constructor.prototype,{constructor:b,getPosition:function(){var b=this.$parent;return a.extend({},b.offset(),{width:b[0].offsetWidth,height:b[0].offsetHeight})},show:function(){var b=this.$element;b.css({top:0,left:0,display:"block","z-index":1050});var c,d="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,e=this.getPosition(),f=400,g=b[0].offsetHeight;switch(d){case"bottom":c={top:e.top+e.height,left:e.left+e.width/2-f/2};break;case"top":c={top:e.top-g,left:e.left+e.width/2-f/2};break;case"left":c={top:e.top+e.height/2-g/2,left:e.left-f};break;case"right":c={top:e.top+e.height/2-g/2,left:e.left+e.width}}b.css(c).addClass(d).addClass("in"),a.fn.modal.Constructor.prototype.show.call(this,arguments)},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" style="background:none" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}}),a.fn.modalPopover=function(c){return this.each(function(){var d=a(this),e=d.data("modal-popover"),f=a.extend({},a.fn.modalPopover.defaults,d.data(),"object"==typeof c&&c);f.$parent=e&&e.$parent||c.$parent||a(f.target),e||d.data("modal-popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.modalPopover.Constructor=b,a.fn.modalPopover.defaults=a.extend({},a.fn.modal.defaults,{placement:"right",keyboard:!0}),a(function(){a("body").on("click.modal-popover.data-api",'[data-toggle="modal-popover"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal-popover")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());f.$parent=c,b.preventDefault(),e.modalPopover(f).modalPopover("show").one("hide",function(){c.focus()})})})}(window.jQuery),function(a){function b(b,e){c=!1,this.options=a.extend(!0,{},d,e);var f=this;f.options.values_url&&a.ajax({dataType:"json",type:"get",async:!1,url:f.options.values_url}).done(function(b){"object"==typeof b&&(f.options.values=a.merge(f.options.values,b))}),f.options.values=f.options.onLoadDefaults(f.options.values);var g=a(document.createElement("span")).addClass("pills-list").appendTo(b);if(f.options.values=f._prepare(f.options.values),a.each(f.options.values,function(a,b){f.addTag(g,b)}),f.options.can_add){var h=[],i=[],j=a(document.createElement("input")).addClass("tag-input").attr({autocomplete:"off",type:"text"}).css("outline","none").typeahead({items:f.options.suggestion_limit,source:function(b){var c=a.merge([],f.options.suggestions);return h=[],i={},f.options.suggestion_url&&a.ajax({dataType:"json",type:"get",async:!1,url:f.options.suggestion_url,data:{q:b,limit:f.options.suggestion_limit}}).done(function(b){"object"==typeof b&&(c=a.merge(c,b))}),c=f.options.onLoadSuggestions(c),c=f._prepare(c),a.each(c,function(a,b){i[b.suggest]=b,h.push(b.suggest)}),h},updater:function(a){f._addTag(g,j,i[a])}}).click(function(a){a.stopPropagation()});0==f.options.only_suggestions&&j.keyup(function(b){a(this).val()&&13==b.keyCode&&f._addTag(g,a(this))});{var k=a(f.options.templates.input_pill).append(j).append(a(f.options.templates.ok_icon).css("cursor","pointer").click(function(a){a.stopPropagation(),f._addTag(g,j),j.focus()})).hide().appendTo(b);a(f.options.templates.add_pill).addClass("add-pill").css("cursor","pointer").append(a(document.createElement("span")).attr({}).addClass("tag-add").append(f.options.templates.plus_icon)).click(function(){k.show(),j.focus();var b=a(this);b.hide(),setTimeout(function(){a("body").one("click",function(){k.hide(),b.show()})},200)}).appendTo(b)}}}var c=!1,d={values:[],values_url:"",templates:{pill:'<span class="badge btn-primary tag-badge">{0}</span>',add_pill:'<span class="badge tag-badge">...</span>',input_pill:'<span class="badge tag-badge"></span>',number:" <sup><small>{0}</small></sup>",plus_icon:'<i class="icon-plus-sign tag-icon"></i>',delete_icon:'<i class="icon-remove-sign tag-icon" data-toggle="tooltip" title="Delete"></i>',ok_icon:'<i class="icon-ok-sign tag-icon"></i>'},limit:0,tag_link_target:"",can_delete:!0,can_add:!0,double_hilight:"#0B3549",input_name:"tags[]",lang:{"delete":"Delete",limit:"You have reached limit of only {0} tags to be added."},suggestion_limit:15,suggestion_url:"",suggestions:[],only_suggestions:!1,remove_url:"",onLoadDefaults:function(a){return a},onRemove:function(){},onError:function(a,b){alert(b)},onDuplicate:null,onBeforeAdd:function(a){return a},onBeforeNewAdd:function(a){return a},onLoadSuggestions:function(a){return a},onDuplicate:null,onBeforeRemove:function(){return!0}};b.prototype._prepare=function(b){return a.each(b,function(a,c){return c?("string"==typeof c&&(b[a]={id:c,text:c,suggest:c}),b[a].suggest=b[a].suggest||b[a].text,b[a].url=c.url||"",b[a].title=c.title||"",void(b[a].num=parseInt(c.num||"0"))):(delete b[a],!0)}),b},b.prototype._addTag=function(a,b,c){c||(c=this._prepare([b.val()])[0]),this.addTag(a,c)&&b.val("").focus()},b.prototype.addTag=function(b,d){var e=this;if(!d)return!1;if(parseInt(e.options.limit)>0&&b.children().length>=parseInt(e.options.limit))return e.options.onError(10,e.options.lang.limit.format(e.options.limit)),!1;("undefined"==typeof d.id||"undefined"==typeof d.text)&&(e.options.onError(11,"Not correct object format to create tag/pill"),a.error("Not correct object format to create tag/pill"));var f="";if(a.each(b.children(),function(b,c){return d.id.toString().toLowerCase()==a(c).data("tag-id").toString().toLowerCase()?(f=a(c),!1):void 0}),f){if(!e.options.onDuplicate){var g=a(b.children()[0]).css("background-color");return f.stop().animate({backgroundColor:e.options.double_hilight},100,"swing",function(){f.stop().animate({backgroundColor:g},100,"swing",function(){f.css("background-color","")})}),!1}if(1!=e.options.onDuplicate(f,d))return!1}if(d.url){var h=d.title?' data-toggle="tooltip" title="'+d.title+'"':"";d.text='<a class="tag-link" '+h+' target="'+e.options.tag_link_target+'" href="'+d.url+'">'+d.text+"</a>"}var i="";e.options.can_delete&&(i=a(document.createElement("a")).attr({href:"javascript:void(0)","class":"tag-remove"}).html(e.options.templates.delete_icon.toString()).click(function(){e.removeTag(this)}));var j=d.num>0?e.options.templates.number.format(d.num):"",k=a(e.options.templates.pill.format(d.text)).attr("data-tag-id",d.id).append(j,i,a(document.createElement("input")).attr({"data-tag-hidden":d.id,name:e.options.input_name,type:"hidden",value:d.id})).css({"white-space":"nowrap"});return k=0==c?e.options.onBeforeAdd(k,d):e.options.onBeforeNewAdd(k,d),b.append(k),a('[data-toggle="tooltip"]').tooltip(),!0},b.prototype.removeTag=function(b){var c=this,d=a(b).closest("[data-tag-id]");c.options.remove_url&&a.ajax({dataType:"json",type:"post",async:!1,url:c.options.remove_url,data:{id:d.data("tag-id")}}),c.options.onBeforeRemove(d)!==!1&&d.animate({width:0,"padding-right":0,"padding-left":0},200,"swing",function(){var b=a(this);c.options.onRemove(b),b.remove()})},a.fn.tags=function(d){return this.each(function(){new b(a(this),d),c=!0})}}(window.jQuery),String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),function(a,b,c,d){var e=function(b,c){this.widget="",this.$element=a(b),this.defaultTime=c.defaultTime,this.disableFocus=c.disableFocus,this.isOpen=c.isOpen,this.minuteStep=c.minuteStep,this.modalBackdrop=c.modalBackdrop,this.secondStep=c.secondStep,this.showInputs=c.showInputs,this.showMeridian=c.showMeridian,this.showSeconds=c.showSeconds,this.template=c.template,this.appendWidgetTo=c.appendWidgetTo,this._init()};e.prototype={constructor:e,_init:function(){var b=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)})):this.$element.on(this.template?{"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this)}:{"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)}),this.$widget=this.template!==!1?a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",a.proxy(this.widgetClick,this)):!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=d,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(a){var b;b=a?this.minute-a:this.minute-this.minuteStep,0>b?(this.decrementHour(),this.minute=b+60):this.minute=b,this.update()},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a,this.update()},elementKeydown:function(a){switch(a.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":a.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(a.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,d){return a=10>a?"0"+a:a,b=10>b?"0"+b:b,c=10>c?"0"+c:c,a+":"+b+(this.showSeconds?":"+c:"")+(this.showMeridian?" "+d:"")},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),d=c.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-d}},getTemplate:function(){var a,b,c,d,e,f;switch(this.showInputs?(b='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',c='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',d='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',e='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"</div>"}return a},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){this.isOpen!==!1&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal&&this.$widget.modal("hide"),a(c).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0);this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0);this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0);this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0);this.highlightedUnit="meridian",a.setSelectionRange&&(this.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?void(this.hour=0):(this.hour++,void this.update())},incrementMinute:function(a){var b;b=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep,b>59?(this.incrementHour(),this.minute=b-60):this.minute=b,this.update()},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a,this.update()},remove:function(){a("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date,c=b.getHours(),d=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,e=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,f="AM";
this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="PM"):f="AM"),this.hour=c,this.minute=d,this.second=e,this.meridian=f,this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b,c;this.showMeridian?(b=a.split(" "),c=b[0].split(":"),this.meridian=b[1]):c=a.split(":"),this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":("pm"===this.meridian||"p"===this.meridian)&&(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var b=this;a(c).on("mousedown.timepicker",function(c){0===a(c.target).closest(".bootstrap-timepicker-widget").length&&b.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template&&this.$widget.modal?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):this.isOpen===!1,this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var a=this.$element.val();a&&this.setTime(a)},updateWidget:function(){if(this.$widget!==!1){var a=this.hour<10?"0"+this.hour:this.hour,b=this.minute<10?"0"+this.minute:this.minute,c=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(b)}},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("a").data("action");c&&this[c]()},widgetKeydown:function(b){var c=a(b.target).closest("input"),d=c.attr("name");switch(b.keyCode){case 9:if(this.showMeridian){if("meridian"===d)return this.hideWidget()}else if(this.showSeconds){if("second"===d)return this.hideWidget()}else if("minute"===d)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(b.preventDefault(),d){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(b.preventDefault(),d){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},a.fn.timepicker=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var d=a(this),f=d.data("timepicker"),g="object"==typeof b&&b;f||d.data("timepicker",f=new e(this,a.extend({},a.fn.timepicker.defaults,g,a(this).data()))),"string"==typeof b&&f[b].apply(f,c)})},a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"},a.fn.timepicker.Constructor=e}(jQuery,window,document);var defaults={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"Today",month:"Month",week:"Week",day:"Day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0};!function(a,b){function c(b){a.extend(!0,defaults,b)}function d(c,d,j){function k(a){eb?q()&&(z(),x(a)):l()}function l(){fb=d.theme?"ui":"fc",c.addClass("fc"),c.addClass(d.isRTL?"fc-rtl":"fc-ltr"),d.theme&&c.addClass("ui-widget"),eb=a("<div class='fc-content' style='position:relative'/>").prependTo(c),cb=new e(bb,d),db=cb.render(),db&&a("#newHeader").html(db),s(d.defaultView),d.handleWindowResize&&a(window).resize(B),r()||n()}function n(){setTimeout(function(){!gb.start&&r()&&w()},0)}function o(){gb&&(ab("viewDestroy",gb,gb,gb.element),gb.triggerEventDestroy()),a(window).unbind("resize",B),cb.destroy(),eb.remove(),c.removeClass("fc fc-rtl ui-widget")}function q(){return c.is(":visible")}function r(){return a("body").is(":visible")}function s(a){gb&&a==gb.name||v(a)}function v(b){ob++,gb&&(ab("viewDestroy",gb,gb,gb.element),P(),gb.triggerEventDestroy(),Y(),gb.element.remove(),cb.deactivateButton(gb.name)),cb.activateButton(b),gb=new xb[b](a("<div class='fc-view fc-view-"+b+"' style='position:relative'/>").appendTo(eb),bb),w(),Z(),ob--}function w(a){x(a)}function x(a){ob++,gb.start&&(ab("viewDestroy",gb,gb,gb.element),P(),G()),Y(),gb.render(pb,a||0),A(),Z(),(gb.afterRender||J)(),M(),N(),ab("viewRender",gb,gb,gb.element),gb.trigger("viewDisplay",mb),ob--,H()}function y(){q()&&(P(),G(),z(),A(),E())}function z(){ib=d.contentHeight?d.contentHeight:d.height?d.height-(db?db.height():0)-F(eb):Math.round(eb.width()/Math.max(d.aspectRatio,.5))}function A(){ib===b&&z(),ob++,gb.setHeight(ib),gb.setWidth(eb.width()),ob--,hb=c.outerWidth()}function B(){if(!ob)if(gb.start){var a=++nb;setTimeout(function(){a==nb&&!ob&&q()&&hb!=(hb=c.outerWidth())&&(ob++,y(),gb.trigger("windowResize",mb),ob--)},200)}else n()}function C(){G(),I()}function D(a){G(),E(a)}function E(a){q()&&(gb.setEventData(qb),gb.renderEvents(qb,a),gb.trigger("eventAfterAllRender"))}function G(){gb.triggerEventDestroy(),gb.clearEvents(),gb.clearEventData()}function H(){!d.lazyFetching||kb(gb.visStart,gb.visEnd)?I():E()}function I(){lb(gb.visStart,gb.visEnd)}function K(a){qb=a,E()}function L(a){D(a)}function M(){cb.updateTitle(gb.title)}function N(){var a=new Date;a>=gb.start&&a<new Date(gb.start.getFullYear(),gb.start.getMonth(),gb.start.getDate()+1)?cb.disableButton("today"):cb.enableButton("today")}function O(a,c,d){gb.select(a,c,d===b?!0:d)}function P(){gb&&gb.unselect()}function Q(){w(-1)}function R(){w(1)}function S(){w(-7)}function T(){w(7)}function U(){pb=new Date,w()}function V(a,b,c){a instanceof Date?pb=m(a):p(pb,a,b,c),w()}function W(a,c,d){a!==b&&g(pb,a),c!==b&&h(pb,c),d!==b&&i(pb,d),w()}function X(){return m(pb)}function Y(){eb.css({width:"100%",height:eb.height(),overflow:"hidden"})}function Z(){eb.css({width:"",height:"",overflow:""})}function $(){return gb}function _(a,c){return c===b?d[a]:void(("height"==a||"contentHeight"==a||"aspectRatio"==a)&&(d[a]=c,y()))}function ab(a,b){return d[a]?d[a].apply(b||mb,Array.prototype.slice.call(arguments,2)):void 0}var bb=this;bb.options=d,bb.render=k,bb.destroy=o,bb.refetchEvents=C,bb.reportEvents=K,bb.reportEventChange=L,bb.rerenderEvents=D,bb.changeView=s,bb.select=O,bb.unselect=P,bb.prev=Q,bb.next=R,bb.prevYear=S,bb.nextYear=T,bb.today=U,bb.gotoDate=V,bb.incrementDate=W,bb.formatDate=function(a,b){return t(a,b,d)},bb.formatDates=function(a,b,c){return u(a,b,c,d)},bb.getDate=X,bb.getView=$,bb.option=_,bb.trigger=ab,f.call(bb,d,j);var cb,db,eb,fb,gb,hb,ib,jb,kb=bb.isFetchNeeded,lb=bb.fetchEvents,mb=c[0],nb=0,ob=0,pb=new Date,qb=[];p(pb,d.year,d.month,d.date),d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var g=d.dropAccept;(a.isFunction(g)?g.call(e,f):f.is(g))&&(jb=e,gb.dragStart(jb,b,c))}}).bind("dragstop",function(a,b){jb&&(gb.dragStop(jb,a,b),jb=null)})}function e(b,c){function d(){m=c.theme?"ui":"fc";var b=c.header;return b?n=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(f("left")).append(f("center")).append(f("right"))):void 0}function e(){n.remove()}function f(d){var e=a("<td class='fc-header-"+d+"'/>"),f=c.header[d];return f&&a.each(f.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var f;a.each(this.split(","),function(d,g){if("title"==g)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(m+"-corner-right"),f=null;else{var h;if(b[g]?h=b[g]:xb[g]&&(h=function(){k.removeClass(m+"-state-hover"),b.changeView(g)}),h){var i=c.theme?N(c.buttonIcons,g):null,j=N(c.buttonText,g),k=a("<span class='fc-button fc-button-"+g+" "+m+"-state-default'>"+(i?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+i+"'/></span>":j)+"</span>").click(function(){k.hasClass(m+"-state-disabled")||h()}).mousedown(function(){k.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-down")}).mouseup(function(){k.removeClass(m+"-state-down")}).hover(function(){k.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-hover")},function(){k.removeClass(m+"-state-hover").removeClass(m+"-state-down")}).appendTo(e);P(k),f||k.addClass(m+"-corner-left"),f=k}}}),f&&f.addClass(m+"-corner-right")}),e}function g(a){n.find("h2").html(a)}function h(a){n.find("span.fc-button-"+a).addClass(m+"-state-active")}function i(a){n.find("span.fc-button-"+a).removeClass(m+"-state-active")}function j(a){n.find("span.fc-button-"+a).addClass(m+"-state-disabled")}function k(a){n.find("span.fc-button-"+a).removeClass(m+"-state-disabled")}var l=this;l.render=d,l.destroy=e,l.updateTitle=g,l.activateButton=h,l.deactivateButton=i,l.disableButton=j,l.enableButton=k;var m,n=a([])}function f(c,d){function e(a,b){return!y||y>a||b>z}function f(a,b){y=a,z=b,I=[];var c=++F,d=E.length;G=d;for(var e=0;d>e;e++)g(E[e],c)}function g(b,d){h(b,function(e){if(d==F){if(e){c.eventDataTransform&&(e=a.map(e,c.eventDataTransform)),b.eventDataTransform&&(e=a.map(e,b.eventDataTransform));for(var f=0;f<e.length;f++)e[f].source=b,t(e[f]);I=I.concat(e)}G--,G||C(I)}})}function h(b,d){var e,f,g=wb.sourceFetchers;for(e=0;e<g.length;e++){if(f=g[e](b,y,z,d),f===!0)return;if("object"==typeof f)return void h(f,d)}var i=b.events;if(i)a.isFunction(i)?(r(),i(m(y),m(z),function(a){d(a),s()})):a.isArray(i)?d(i):d();else{var j=b.url;if(j){var k,l=b.success,n=b.error,o=b.complete;k=a.isFunction(b.data)?b.data():b.data;var p=a.extend({},k||{}),q=T(b.startParam,c.startParam),t=T(b.endParam,c.endParam);q&&(p[q]=Math.round(+y/1e3)),t&&(p[t]=Math.round(+z/1e3)),r(),a.ajax(a.extend({},yb,b,{data:p,success:function(b){b=b||[];var c=S(l,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){S(n,this,arguments),d()},complete:function(){S(o,this,arguments),s(),A("newEventsComplete")}}))}else d()}}function i(a){a=j(a),a&&(G++,g(a,F))}function j(b){return a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b}),"object"==typeof b?(u(b),E.push(b),b):void 0}function k(b){E=a.grep(E,function(a){return!v(a,b)}),I=a.grep(I,function(a){return!v(a.source,b)}),C(I)}function l(a){var b,c,d=I.length,e=B().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;d>b;b++)c=I[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+f),c.end=a.end?new Date(c.end?+c.end+g:+e(c)+g):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroundColor=a.backgroundColor,c.borderColor=a.borderColor,c.textColor=a.textColor,t(c));t(a),C(I)}function n(a,b){t(a),a.source||(b&&(D.events.push(a),a.source=D),I.push(a)),C(I)}function o(b){if(b){if(!a.isFunction(b)){var c=b+"";b=function(a){return a._id==c}}I=a.grep(I,b,!0);for(var d=0;d<E.length;d++)a.isArray(E[d].events)&&(E[d].events=a.grep(E[d].events,b,!0))}else{I=[];for(var d=0;d<E.length;d++)a.isArray(E[d].events)&&(E[d].events=[])}C(I)}function p(b){return a.isFunction(b)?a.grep(I,b):b?(b+="",a.grep(I,function(a){return a._id==b})):I}function r(){H++||A("loading",null,!0,B())}function s(){--H||A("loading",null,!1,B())}function t(a){var d=a.source||{},e=T(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+zb++:a.id+""),a.date&&(a.start||(a.start=a.date),delete a.date),a._start=m(a.start=q(a.start,e)),a.end=q(a.end,e),a.end&&a.end<=a.start&&(a.end=null),a._end=a.end?m(a.end):null,a.allDay===b&&(a.allDay=T(d.allDayDefault,c.allDayDefault)),a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[]}function u(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=wb.sourceNormalizers,c=0;c<b.length;c++)b[c](a)}function v(a,b){return a&&b&&w(a)==w(b)}function w(a){return("object"==typeof a?a.events||a.url:"")||a}var x=this;x.isFetchNeeded=e,x.fetchEvents=f,x.addEventSource=i,x.removeEventSource=k,x.updateEvent=l,x.renderEvent=n,x.removeEvents=o,x.clientEvents=p,x.normalizeEvent=t;for(var y,z,A=x.trigger,B=x.getView,C=x.reportEvents,D={events:[]},E=[D],F=0,G=0,H=0,I=[],J=0;J<d.length;J++)j(d[J])}function g(a,b,c){return a.setFullYear(a.getFullYear()+b),c||l(a),a}function h(a,b,c){if(+a){var d=a.getMonth()+b,e=m(a);for(e.setDate(1),e.setMonth(d),a.setMonth(d),c||l(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(e>a?1:-1))}return a}function i(a,b,c){if(+a){var d=a.getDate()+b,e=m(a);e.setHours(9),e.setDate(d),a.setDate(d),c||l(a),j(a,e)}return a}function j(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(b>a?1:-1)*Cb)}function k(a,b){return a.setMinutes(a.getMinutes()+b),a}function l(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function m(a,b){return b?l(new Date(+a)):new Date(+a)}function n(){var a,b=0;do a=new Date(1970,b++,1);while(a.getHours());return a}function o(a,b){return Math.round((m(a,!0)-m(b,!0))/Bb)}function p(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c)),d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==b&&a.setDate(e)}function q(a,c){return"object"==typeof a?a:"number"==typeof a?new Date(1e3*a):"string"==typeof a?a.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(a)):(c===b&&(c=!0),r(a,c)||(a?new Date(a):null)):null}function r(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1)),c[5]&&(d.setDate(c[5]),e.setDate(c[5])),j(d,e),c[7]&&d.setHours(c[7]),c[8]&&d.setMinutes(c[8]),c[10]&&d.setSeconds(c[10]),c[12]&&d.setMilliseconds(1e3*Number("0."+c[12])),j(d,e)}else if(d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1e3*Number("0."+c[12]):0),c[14]){var f=60*Number(c[16])+(c[18]?Number(c[18]):0);f*="-"==c[15]?1:-1,d=new Date(+d+60*f*1e3)}return d}function s(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();var b=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(b){var c=parseInt(b[1],10);return b[3]&&(c%=12,"p"==b[3].toLowerCase().charAt(0)&&(c+=12)),60*c+(b[2]?parseInt(b[2],10):0)}}function t(a,b,c){return u(a,null,b,c)}function u(a,b,c,d){d=d||defaults;var e,f,g,h,i=a,j=b,k=c.length,l="";for(e=0;k>e;e++)if(f=c.charAt(e),"'"==f){for(g=e+1;k>g;g++)if("'"==c.charAt(g)){i&&(l+=g==e+1?"'":c.substring(e+1,g),e=g);break}}else if("("==f){for(g=e+1;k>g;g++)if(")"==c.charAt(g)){var m=t(i,c.substring(e+1,g),d);parseInt(m.replace(/\D/,""),10)&&(l+=m),e=g;break}}else if("["==f){for(g=e+1;k>g;g++)if("]"==c.charAt(g)){var n=c.substring(e+1,g),m=t(i,n,d);m!=t(j,n,d)&&(l+=m),e=g;break}}else if("{"==f)i=b,j=a;else if("}"==f)i=a,j=b;else{for(g=k;g>e;g--)if(h=Eb[c.substring(e,g)]){i&&(l+=h(i,d)),e=g-1;break}g==e&&i&&(l+=f)}return l}function v(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1}function w(a){return a.end?x(a.end,a.allDay):i(m(a.start),1)}function x(a,b){return a=m(a),b||a.getHours()||a.getMinutes()?i(a,1):l(a)}function y(c,d,e){c.unbind("mouseover").mouseover(function(c){for(var f,g,h,i=c.target;i!=this;)f=i,i=i.parentNode;(g=f._fci)!==b&&(f._fci=b,h=d[g],e(h.event,h.element,h),a(c.target).trigger(c)),c.stopPropagation()})}function z(b,c,d){for(var e,f=0;f<b.length;f++)e=a(b[f]),e.width(Math.max(0,c-B(e,d)))}function A(b,c,d){for(var e,f=0;f<b.length;f++)e=a(b[f]),e.height(Math.max(0,c-F(e,d)))}function B(a,b){return C(a)+E(a)+(b?D(a):0)}function C(b){return(parseFloat(a.css(b[0],"paddingLeft",!0))||0)+(parseFloat(a.css(b[0],"paddingRight",!0))||0)}function D(b){return(parseFloat(a.css(b[0],"marginLeft",!0))||0)+(parseFloat(a.css(b[0],"marginRight",!0))||0)}function E(b){return(parseFloat(a.css(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.css(b[0],"borderRightWidth",!0))||0)}function F(a,b){return G(a)+I(a)+(b?H(a):0)}function G(b){return(parseFloat(a.css(b[0],"paddingTop",!0))||0)+(parseFloat(a.css(b[0],"paddingBottom",!0))||0)}function H(b){return(parseFloat(a.css(b[0],"marginTop",!0))||0)+(parseFloat(a.css(b[0],"marginBottom",!0))||0)}function I(b){return(parseFloat(a.css(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.css(b[0],"borderBottomWidth",!0))||0)}function J(){}function K(a,b){return a-b}function L(a){return Math.max.apply(Math,a)}function M(a){return(10>a?"0":"")+a}function N(a,c){if(a[c]!==b)return a[c];for(var d,e=c.split(/(?=[A-Z])/),f=e.length-1;f>=0;f--)if(d=a[e[f].toLowerCase()],d!==b)return d;return a[""]}function O(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function P(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Q(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function R(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,i=a.textColor||c.textColor||b("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}function S(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function T(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function U(a,b){function c(a,b){b&&(h(a,b),a.setDate(1));var c=e("firstDay"),l=m(a,!0);l.setDate(1);var n=h(m(l),1),p=m(l);i(p,-((p.getDay()-c+7)%7)),g(p);var q=m(n);i(q,(7-q.getDay()+c)%7),g(q,-1,!0);var r=j(),s=Math.round(o(q,p)/7);"fixed"==e("weekMode")&&(i(q,7*(6-s)),s=6),d.title=k(l,e("titleFormat")),d.start=l,d.end=n,d.visStart=p,d.visEnd=q,f(s,r,!0)}var d=this;d.render=c,X.call(d,a,b,"month");var e=d.opt,f=d.renderBasic,g=d.skipHiddenDays,j=d.getCellsPerWeek,k=b.formatDate}function V(a,b){function c(a,b){b&&i(a,7*b);var c=i(m(a),-((a.getDay()-e("firstDay")+7)%7)),k=i(m(c),7),l=m(c);g(l);var n=m(k);g(n,-1,!0);var o=h();d.start=c,d.end=k,d.visStart=l,d.visEnd=n,d.title=j(l,i(m(n),-1),e("titleFormat")),f(1,o,!1)}var d=this;d.render=c,X.call(d,a,b,"basicWeek");var e=d.opt,f=d.renderBasic,g=d.skipHiddenDays,h=d.getCellsPerWeek,j=b.formatDates}function W(a,b){function c(a,b){b&&i(a,b),g(a,0>b?-1:1);var c=m(a,!0),j=i(m(c),1);d.title=h(a,e("titleFormat")),d.start=d.visStart=c,d.end=d.visEnd=j,f(1,1,!1)}var d=this;d.render=c,X.call(d,a,b,"basicDay");var e=d.opt,f=d.renderBasic,g=d.skipHiddenDays,h=b.formatDate}function X(b,c,d){function e(a,b,c){bb=a,cb=b,db=c,f(),R||g(),h()}function f(){ib=ob("theme")?"ui":"fc",jb=ob("columnFormat"),kb=ob("weekNumbers"),mb=ob("weekNumberTitle"),nb="iso"!=ob("weekNumberCalculation")?"w":"W"}function g(){X=a("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}function h(){var c=j();L&&L.remove(),L=a(c).appendTo(b),M=L.find("thead"),N=M.find(".fc-day-header"),R=L.find("tbody"),S=R.find("tr"),T=R.find(".fc-day"),U=S.find("td:first-child"),V=S.eq(0).find(".fc-day > div"),W=S.eq(0).find(".fc-day-content > div"),Q(M.add(M.find("tr"))),Q(S),S.eq(0).addClass("fc-first"),S.filter(":last").addClass("fc-last"),T.each(function(b,c){var d=yb(Math.floor(b/cb),b%cb);pb("dayRender",K,d,a(c))}),s(T)}function j(){var a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+k()+n()+"</table>";return a}function k(){var a,b,c=ib+"-widget-header",d="";for(d+="<thead><tr>",kb&&(d+="<th class='fc-week-number "+c+"'>"+O(mb)+"</th>"),a=0;cb>a;a++)b=yb(0,a),d+="<th class='fc-day-header fc-"+Ab[b.getDay()]+" "+c+"'>"+O(Cb(b,jb))+"</th>";return d+="</tr></thead>"}function n(){var a,b,c,d=ib+"-widget-content",e="";for(e+="<tbody>",a=0;bb>a;a++){for(e+="<tr class='fc-week'>",kb&&(c=yb(a,0),e+="<td class='fc-week-number "+d+"'><div>"+O(Cb(c,nb))+"</div></td>"),b=0;cb>b;b++)c=yb(a,b),e+=o(c);e+="</tr>"}return e+="</tbody>"}function o(a){var b=ib+"-widget-content",c=K.start.getMonth(),d=l(new Date),e="",f=["fc-day","fc-"+Ab[a.getDay()],b];return a.getMonth()!=c&&f.push("fc-other-month"),+a==+d?f.push("fc-today",ib+"-state-highlight"):f.push(d>a?"fc-past":"fc-future"),e+="<td class='"+f.join(" ")+"' data-date='"+Cb(a,"yyyy-MM-dd")+"'><div>",db&&(e+="<div class='fc-day-number'>"+a.getDate()+"</div>"),e+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function p(b){$=b;var c,d,e,f=$-M.height();"variable"==ob("weekMode")?c=d=Math.floor(f/(1==bb?2:6)):(c=Math.floor(f/bb),d=f-c*(bb-1)),U.each(function(b,f){bb>b&&(e=a(f),e.find("> div").css("min-height",(b==bb-1?d:c)-F(e)))})}function q(a){Z=a,gb.clear(),hb.clear(),ab=0,kb&&(ab=M.find("th.fc-week-number").outerWidth()),_=Math.floor((Z-ab)/cb),z(N.slice(0,-1),_)}function s(a){a.click(t).mousedown(xb)}function t(b){if(!ob("selectable")){var c=r(a(this).data("date"));pb("dayClick",this,c,!0,b)}}function u(a,b,c){c&&eb.build();for(var d=Bb(a,b),e=0;e<d.length;e++){var f=d[e];s(v(f.row,f.leftCol,f.row,f.rightCol))}}function v(a,c,d,e){var f=eb.rect(a,c,d,e,b);return ub(f,b)}function w(a){return m(a)}function x(a,b){u(a,i(m(b),1),!0)}function y(){wb()}function A(a,b,c){var d=zb(a),e=T[d.row*cb+d.col];pb("dayClick",e,a,b,c)}function B(a,b){fb.start(function(a){wb(),a&&v(a.row,a.col,a.row,a.col)},b)}function C(a,b,c){var d=fb.stop();if(wb(),d){var e=yb(d);pb("drop",a,e,!0,b,c)}}function D(a){return m(a.start)}function E(a){return gb.left(a)}function G(a){return gb.right(a)}function H(a){return hb.left(a)}function I(a){return hb.right(a)}function J(a){return S.eq(a)}var K=this;K.renderBasic=e,K.setHeight=p,K.setWidth=q,K.renderDayOverlay=u,K.defaultSelectionEnd=w,K.renderSelection=x,K.clearSelection=y,K.reportDayClick=A,K.dragStart=B,K.dragStop=C,K.defaultEventEnd=D,K.getHoverListener=function(){return fb},K.colLeft=E,K.colRight=G,K.colContentLeft=H,K.colContentRight=I,K.getIsCellAllDay=function(){return!0},K.allDayRow=J,K.getRowCnt=function(){return bb},K.getColCnt=function(){return cb},K.getColWidth=function(){return _},K.getDaySegmentContainer=function(){return X},lb.call(K,b,c,d),rb.call(K),qb.call(K),Y.call(K);var L,M,N,R,S,T,U,V,W,X,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,mb,nb,ob=K.opt,pb=K.trigger,ub=K.renderOverlay,wb=K.clearOverlays,xb=K.daySelectionMousedown,yb=K.cellToDate,zb=K.dateToCell,Bb=K.rangeToSegments,Cb=c.formatDate;P(b.addClass("fc-grid")),eb=new sb(function(b,c){var d,e,f;N.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),S.each(function(c,g){bb>c&&(d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)}),f[1]=e+d.outerHeight()}),fb=new tb(eb),gb=new vb(function(a){return V.eq(a)}),hb=new vb(function(a){return W.eq(a)})}function Y(){function a(a,b){c.renderDayEvents(a,b)}function b(){c.getDaySegmentContainer().empty()}var c=this;c.renderEvents=a,c.clearEvents=b,mb.call(c)}function Z(a,b){function c(a,b){b&&i(a,b);var c=i(m(a),0),k=i(m(c),7),l=m(c);g(l);var n=m(k);g(n,-1,!0);var o=h();d.title=j(l,i(m(n),-1),e("titleFormat")),d.start=c,d.end=k,d.visStart=l,d.visEnd=n,f(o)}var d=this;d.render=c,_.call(d,a,b,"agendaWeek");var e=d.opt,f=d.renderAgenda,g=d.skipHiddenDays,h=d.getCellsPerWeek,j=b.formatDates}function $(a,b){function c(a,b){b&&i(a,b),g(a,0>b?-1:1);var c=m(a,!0),j=i(m(c),1);d.title=h(a,e("titleFormat")),d.start=d.visStart=c,d.end=d.visEnd=j,f(1)}var d=this;d.render=c,_.call(d,a,b,"agendaDay");var e=d.opt,f=d.renderAgenda,g=d.skipHiddenDays,h=b.formatDate}function _(c,d,e){function f(a){Ib=a,g(),_?j():h()}function g(){Ob=Wb("theme")?"ui":"fc",Pb=Wb("isRTL"),Qb=s(Wb("minTime")),Rb=s(Wb("maxTime")),Sb=Wb("columnFormat"),Tb=Wb("weekNumbers"),Ub=Wb("weekNumberTitle"),Vb="iso"!=Wb("weekNumberCalculation")?"w":"W",Fb=Wb("snapMinutes")||Wb("slotMinutes")}function h(){var b,d,e,f,g,h=Ob+"-widget-header",i=Ob+"-widget-content",l=Wb("slotMinutes")%15==0;for(j(),jb=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),Wb("allDaySlot")?(kb=a("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(jb),b="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+h+" fc-agenda-axis'>"+Wb("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+h+" fc-agenda-gutter'>&nbsp;</th></tr></table>",mb=a(b).appendTo(jb),nb=mb.find("tr"),w(nb.find("td")),jb.append("<div class='fc-agenda-divider "+h+"'><div class='fc-agenda-divider-inner'/></div>")):kb=a([]),ob=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(jb),pb=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ob),ub=a("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(pb),b="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",d=n(),f=k(m(d),Rb),k(d,Qb),Jb=0,e=0;f>d;e++)g=d.getMinutes(),b+="<tr class='fc-slot"+e+" "+(g?"fc-minor":"")+"'><th class='fc-agenda-axis "+h+"'>"+(l&&g?"&nbsp;":fc(d,Wb("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",k(d,Wb("slotMinutes")),Jb++;b+="</tbody></table>",wb=a(b).appendTo(pb),x(wb.find("td"))}function j(){var b=o();_&&_.remove(),_=a(b).appendTo(c),bb=_.find("thead"),cb=bb.find("th").slice(1,-1),db=_.find("tbody"),eb=db.find("td").slice(0,-1),fb=eb.find("> div"),gb=eb.find(".fc-day-content > div"),hb=eb.eq(0),ib=fb.eq(0),Q(bb.add(bb.find("tr"))),Q(db.add(db.find("tr")))}function o(){var a="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+p()+q()+"</table>";return a}function p(){var a,b,c,d=Ob+"-widget-header",e="";for(e+="<thead><tr>",Tb?(a=cc(0,0),b=fc(a,Vb),Pb?b+=Ub:b=Ub+b,e+="<th class='fc-agenda-axis fc-week-number "+d+"'>"+O(b)+"</th>"):e+="<th class='fc-agenda-axis "+d+"'>&nbsp;</th>",c=0;Ib>c;c++)a=cc(0,c),e+="<th data-timestamp='"+a.getTime()+"' class='fc-"+Ab[a.getDay()]+" fc-col"+c+" "+d+"'>"+O(fc(a,Sb))+"</th>";return e+="<th class='fc-agenda-gutter "+d+"'>&nbsp;</th></tr></thead>"}function q(){var a,b,c,d,e,f=Ob+"-widget-header",g=Ob+"-widget-content",h=l(new Date),i="";for(i+="<tbody><tr><th class='fc-agenda-axis "+f+"'>&nbsp;</th>",c="",b=0;Ib>b;b++)a=cc(0,b),e=["fc-col"+b,"fc-"+Ab[a.getDay()],g],+a==+h?e.push(Ob+"-state-highlight","fc-today"):e.push(h>a?"fc-past":"fc-future"),d="<td class='"+e.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",c+=d;return i+=c,i+="<td class='fc-agenda-gutter "+g+"'>&nbsp;</td></tr></tbody>"}function r(a){a===b&&(a=zb),zb=a,gc={};var c=db.position().top,d=ob.position().top,e=Math.min(a-c,wb.height()+d+1);ib.height(e-F(hb)),jb.css("top",c),ob.height(e-d-1),Eb=wb.find("tr:first").height()+1,Gb=Wb("slotMinutes")/Fb,Hb=Eb/Gb}function t(b){yb=b,Mb.clear(),Nb.clear();var c=bb.find("th:first");mb&&(c=c.add(mb.find("th:first"))),c=c.add(wb.find("th:first")),Bb=0,z(c.width("").each(function(b,c){Bb=Math.max(Bb,a(c).outerWidth())}),Bb);var d=_.find(".fc-agenda-gutter");mb&&(d=d.add(mb.find("th.fc-agenda-gutter")));var e=ob[0].clientWidth;Db=ob.width()-e,Db?(z(d,Db),d.show().prev().removeClass("fc-last")):d.hide().prev().addClass("fc-last"),Cb=Math.floor((e-Bb)/Ib),z(cb.slice(0,-1),Cb)}function u(){function a(){ob.scrollTop(d)}var b=n(),c=m(b);c.setHours(Wb("firstHour"));var d=M(b,c)+1;a(),setTimeout(a,0)}function v(){u()}function w(a){a.click(y).mousedown(ac)}function x(a){a.click(y).mousedown(W)}function y(a){if(!Wb("selectable")){var b=Math.min(Ib-1,Math.floor((a.pageX-_.offset().left-Bb)/Cb)),c=cc(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){var e=parseInt(d[1])*Wb("slotMinutes"),f=Math.floor(e/60);c.setHours(f),c.setMinutes(e%60+Qb),Xb("dayClick",eb[b],c,!1,a)}else Xb("dayClick",eb[b],c,!0,a)}}function B(a,b,c){c&&Kb.build();for(var d=ec(a,b),e=0;e<d.length;e++){var f=d[e];w(C(f.row,f.leftCol,f.row,f.rightCol))}}function C(a,b,c,d){var e=Kb.rect(a,b,c,d,jb);return Yb(e,jb)}function D(a,b){for(var c=0;Ib>c;c++){var d=cc(0,c),e=i(m(d),1),f=new Date(Math.max(d,a)),g=new Date(Math.min(e,b));if(g>f){var h=Kb.rect(0,c,0,c,pb),j=M(d,f),k=M(d,g);h.top=j,h.height=k-j,x(Yb(h,pb))}}}function E(a){return Mb.left(a)}function G(a){return Nb.left(a)}function H(a){return Mb.right(a)}function I(a){return Nb.right(a)}function J(a){return Wb("allDaySlot")&&!a.row}function L(a){var b=cc(0,a.col),c=a.row;return Wb("allDaySlot")&&c--,c>=0&&k(b,Qb+c*Fb),b}function M(a,c){if(a=m(a,!0),c<k(m(a),Qb))return 0;if(c>=k(m(a),Rb))return wb.height();var d=Wb("slotMinutes"),e=60*c.getHours()+c.getMinutes()-Qb,f=Math.floor(e/d),g=gc[f];return g===b&&(g=gc[f]=wb.find("tr").eq(f).find("td div")[0].offsetTop),Math.max(0,Math.round(g-1+Eb*(e%d/d)))}function N(){return nb}function R(a){var b=m(a.start);return a.allDay?b:k(b,Wb("defaultEventMinutes"))}function S(a,b){return b?m(a):k(m(a),Wb("slotMinutes"))}function T(a,b,c){c?Wb("allDaySlot")&&B(a,i(m(b),1),!0):U(a,b)}function U(b,c){var d=Wb("selectHelper");if(Kb.build(),d){var e=dc(b).col;if(e>=0&&Ib>e){var f=Kb.rect(0,e,0,e,pb),g=M(b,b),h=M(b,c);
if(h>g){if(f.top=g,f.height=h-g,f.left+=2,f.width-=5,a.isFunction(d)){var i=d(b,c);i&&(f.position="absolute",xb=a(i).css(f).appendTo(pb))}else f.isStart=!0,f.isEnd=!0,xb=a(bc({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},f)),xb.css("opacity",Wb("dragOpacity"));xb&&(x(xb),pb.append(xb),z(xb,f.width,!0),A(xb,f.height,!0))}}}else D(b,c)}function V(){Zb(),xb&&(xb.remove(),xb=null)}function W(b){if(1==b.which&&Wb("selectable")){_b(b);var c;Lb.start(function(a,b){if(V(),a&&a.col==b.col&&!J(a)){var d=L(b),e=L(a);c=[d,k(m(d),Fb),e,k(m(e),Fb)].sort(K),U(c[0],c[3])}else c=null},b),a(document).one("mouseup",function(a){Lb.stop(),c&&(+c[0]==+c[1]&&X(c[0],!1,a),$b(c[0],c[3],!1,a))})}}function X(a,b,c){Xb("dayClick",eb[dc(a).col],a,b,c)}function Y(a,b){Lb.start(function(a){if(Zb(),a)if(J(a))C(a.row,a.col,a.row,a.col);else{var b=L(a),c=k(m(b),Wb("defaultEventMinutes"));D(b,c)}},b)}function Z(a,b,c){var d=Lb.stop();Zb(),d&&Xb("drop",a,L(d),J(d),b,c)}var $=this;$.renderAgenda=f,$.setWidth=t,$.setHeight=r,$.afterRender=v,$.defaultEventEnd=R,$.timePosition=M,$.getIsCellAllDay=J,$.allDayRow=N,$.getCoordinateGrid=function(){return Kb},$.getHoverListener=function(){return Lb},$.colLeft=E,$.colRight=H,$.colContentLeft=G,$.colContentRight=I,$.getDaySegmentContainer=function(){return kb},$.getSlotSegmentContainer=function(){return ub},$.getMinMinute=function(){return Qb},$.getMaxMinute=function(){return Rb},$.getSlotContainer=function(){return pb},$.getRowCnt=function(){return 1},$.getColCnt=function(){return Ib},$.getColWidth=function(){return Cb},$.getSnapHeight=function(){return Hb},$.getSnapMinutes=function(){return Fb},$.defaultSelectionEnd=S,$.renderDayOverlay=B,$.renderSelection=T,$.clearSelection=V,$.reportDayClick=X,$.dragStart=Y,$.dragStop=Z,lb.call($,c,d,e),rb.call($),qb.call($),ab.call($);var _,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,mb,nb,ob,pb,ub,wb,xb,yb,zb,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb=$.opt,Xb=$.trigger,Yb=$.renderOverlay,Zb=$.clearOverlays,$b=$.reportSelection,_b=$.unselect,ac=$.daySelectionMousedown,bc=$.slotSegHtml,cc=$.cellToDate,dc=$.dateToCell,ec=$.rangeToSegments,fc=d.formatDate,gc={};P(c.addClass("fc-agenda")),Kb=new sb(function(b,c){function d(a){return Math.max(i,Math.min(j,a))}var e,f,g;cb.each(function(b,d){e=a(d),f=e.offset().left,b&&(g[1]=f),g=[f],c[b]=g}),g[1]=f+e.outerWidth(),Wb("allDaySlot")&&(e=nb,f=e.offset().top,b[0]=[f,f+e.outerHeight()]);for(var h=pb.offset().top,i=ob.offset().top,j=i+ob.outerHeight(),k=0;Jb*Gb>k;k++)b.push([d(h+Hb*k),d(h+Hb*(k+1))])}),Lb=new tb(Kb),Mb=new vb(function(a){return fb.eq(a)}),Nb=new vb(function(a){return gb.eq(a)})}function ab(){function c(a,b){var c,d=a.length,f=[],g=[];for(c=0;d>c;c++)a[c].allDay?f.push(a[c]):g.push(a[c]);s("allDaySlot")&&(ab(f,b),C()),h(e(g),b)}function d(){D().empty(),E().empty()}function e(b){var c,d,e,h,i,j=P(),l=I(),n=H(),o=a.map(b,g),p=[];for(d=0;j>d;d++)for(c=N(0,d),k(c,l),i=f(b,o,c,k(m(c),n-l)),i=bb(i),e=0;e<i.length;e++)h=i[e],h.col=d,p.push(h);return p}function f(a,b,c,d){var e,f,g,h,i,j,k,l,n=[],o=a.length;for(e=0;o>e;e++)f=a[e],g=f.start,h=b[e],h>c&&d>g&&(c>g?(i=m(c),k=!1):(i=g,k=!0),h>d?(j=m(d),l=!1):(j=h,l=!0),n.push({event:f,start:i,end:j,isStart:k,isEnd:l}));return n.sort(kb)}function g(a){return a.end?m(a.end):k(m(a.start),s("defaultEventMinutes"))}function h(c,d){var e,f,g,h,i,k,m,n,o,p,q,r,u,v,w,x,z=c.length,A="",C=E(),D=s("isRTL");for(e=0;z>e;e++)f=c[e],g=f.event,h=J(f.start,f.start),i=J(f.start,f.end),k=L(f.col),m=M(f.col),n=m-k,m-=.025*n,n=m-k,o=n*(f.forwardCoord-f.backwardCoord),s("slotEventOverlap")&&(o=Math.max(2*(o-10),o)),D?(q=m-f.backwardCoord*n,p=q-o):(p=k+f.backwardCoord*n,q=p+o),p=Math.max(p,k),q=Math.min(q,m),o=q-p,f.top=h,f.left=p,f.outerWidth=o,f.outerHeight=i-h,A+=j(g,f);for(C[0].innerHTML=A,r=C.children(),e=0;z>e;e++)f=c[e],g=f.event,u=a(r[e]),v=t("eventRender",g,g,u),v===!1?u.remove():(v&&v!==!0&&(u.remove(),u=a(v).css({position:"absolute",top:f.top,left:f.left}).appendTo(C)),f.element=u,g._id===d?l(g,u,f):u[0]._fci=e,V(g,u));for(y(C,c,l),e=0;z>e;e++)f=c[e],(u=f.element)&&(f.vsides=F(u,!0),f.hsides=B(u,!0),w=u.find(".fc-event-title"),w.length&&(f.contentTop=w[0].offsetTop));for(e=0;z>e;e++)f=c[e],(u=f.element)&&(u[0].style.width=Math.max(0,f.outerWidth-f.hsides)+"px",x=Math.max(0,f.outerHeight-f.vsides),u[0].style.height=x+"px",g=f.event,f.contentTop!==b&&x-f.contentTop<10&&(u.find("div.fc-event-time").text(db(g.start,s("timeFormat"))+" - "+g.title),u.find("div.fc-event-title").remove()),t("eventAfterRender",g,g,u))}function j(a,b){var c,d,e=Date.parse(a.start),f=Date.parse(a.end);if("undefined"!=typeof a.eventStart&&"undefined"!=typeof a.eventEnd){var g=Date.parse(a.eventStart),h=Date.parse(a.eventEnd);c=(e-g)/(e-f)*100,d=(h-f)/(e-f)*100}else c=0,d=0;var i="<",j=a.url,k=R(a,s),l=["fc-event","fc-event-vert"];return u(a)&&l.push("fc-event-draggable"),b.isStart&&l.push("fc-event-start"),b.isEnd&&l.push("fc-event-end"),l=l.concat(a.className),a.source&&(l=l.concat(a.source.className||[])),i+=j?"a href='"+O(a.url)+"'":"div",i+=" class='"+l.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+k+"'><div class='fc-event-inner'><div class='fc-event-time'>"+O(eb(a.start,a.end,s("timeFormat")))+"</div><div class='fc-event-title'>"+O(a.title||"")+"</div></div><div class='fc-event-bg'><div class='event-bg-section' style='height:"+c+"%'></div><div style='height:"+(100-c-d)+"%'></div><div class='event-bg-section' style='height:"+d+"%'></div></div>",b.isEnd&&v(a)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(j?"a":"div")+">"}function l(a,b,c){var d=b.find("div.fc-event-time");u(a)&&p(a,b,d),c.isEnd&&v(a)&&q(a,b,d),z(a,b)}function n(a,b,c){function d(){j||(b.width(e).height("").draggable("option","grid",null),j=!0)}var e,f,g,h=c.isStart,j=!0,k=G(),l=Q(),n=S(),p=T(),q=I();b.draggable({opacity:s("dragOpacity","month"),revertDuration:s("dragRevertDuration"),start:function(c,q){t("eventDragStart",b,a,c,q),X(a,b),e=b.width(),k.start(function(c,e){if(_(),c){f=!1;var k=N(0,e.col),q=N(0,c.col);g=o(q,k),c.row?h?j&&(b.width(l-10),A(b,n*Math.round((a.end?(a.end-a.start)/Db:s("defaultEventMinutes"))/p)),b.draggable("option","grid",[l,1]),j=!1):f=!0:($(i(m(a.start),g),i(w(a),g)),d()),f=f||j&&!g}else d(),f=!0;b.draggable("option","revert",f)},c,"drag")},stop:function(c,e){if(k.stop(),_(),t("eventDragStop",b,a,c,e),f)d(),b.css("filter",""),W(a,b);else{var h=0;j||(h=Math.round((b.offset().top-U().offset().top)/n)*p+q-(60*a.start.getHours()+a.start.getMinutes())),Y(this,a,g,h,j,c,e)}}})}function p(a,b,c){function d(){_(),h&&(l?(c.hide(),b.draggable("option","grid",null),$(i(m(a.start),u),i(w(a),u))):(e(v),c.css("display",""),b.draggable("option","grid",[A,B])))}function e(b){var d,e=k(m(a.start),b);a.end&&(d=k(m(a.end),b)),c.text(eb(e,d,s("timeFormat")))}var f,g,h,j,l,n,p,q,u,v,x,y=r.getCoordinateGrid(),z=P(),A=Q(),B=S(),C=T();b.draggable({scroll:!1,grid:[A,B],axis:1==z?"y":!1,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(c,d){t("eventDragStart",b,a,c,d),X(a,b),y.build(),f=b.position(),g=y.cell(c.pageX,c.pageY),h=j=!0,l=n=K(g),p=q=0,u=0,v=x=0},drag:function(a,c){var e=y.cell(a.pageX,a.pageY);if(h=!!e){if(l=K(e),p=Math.round((c.position.left-f.left)/A),p!=q){var i=N(0,g.col),k=g.col+p;k=Math.max(0,k),k=Math.min(z-1,k);var m=N(0,k);u=o(m,i)}l||(v=Math.round((c.position.top-f.top)/B)*C)}(h!=j||l!=n||p!=q||v!=x)&&(d(),j=h,n=l,q=p,x=v),b.draggable("option","revert",!h)},stop:function(c,e){_(),t("eventDragStop",b,a,c,e),h&&(l||u||v)?Y(this,a,u,l?0:v,l,c,e):(h=!0,l=!1,p=0,u=0,v=0,d(),b.css("filter",""),b.css(f),W(a,b))}})}function q(a,b,c){var d,e,f=S(),g=T();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0,X(a,b),t("eventResizeStart",this,a,c,f)},resize:function(h,i){d=Math.round((Math.max(f,b.height())-i.originalSize.height)/f),d!=e&&(c.text(eb(a.start,d||a.end?k(x(a),g*d):null,s("timeFormat"))),e=d)},stop:function(c,e){t("eventResizeStop",this,a,c,e),d?Z(this,a,0,g*d,c,e):W(a,b)}})}var r=this;r.renderEvents=c,r.clearEvents=d,r.slotSegHtml=j,mb.call(r);var s=r.opt,t=r.trigger,u=r.isEventDraggable,v=r.isEventResizable,x=r.eventEnd,z=r.eventElementHandlers,C=r.setHeight,D=r.getDaySegmentContainer,E=r.getSlotSegmentContainer,G=r.getHoverListener,H=r.getMaxMinute,I=r.getMinMinute,J=r.timePosition,K=r.getIsCellAllDay,L=r.colContentLeft,M=r.colContentRight,N=r.cellToDate,P=r.getColCnt,Q=r.getColWidth,S=r.getSnapHeight,T=r.getSnapMinutes,U=r.getSlotContainer,V=r.reportEventElement,W=r.showEvents,X=r.hideEvents,Y=r.eventDrop,Z=r.eventResize,$=r.renderDayOverlay,_=r.clearOverlays,ab=r.renderDayEvents,cb=r.calendar,db=cb.formatDate,eb=cb.formatDates;r.draggableDayEvent=n}function bb(a){var b,c=cb(a),d=c[0];if(db(c),d){for(b=0;b<d.length;b++)eb(d[b]);for(b=0;b<d.length;b++)fb(d[b],0,0)}return gb(c)}function cb(a){var b,c,d,e=[];for(b=0;b<a.length;b++){for(c=a[b],d=0;d<e.length&&hb(c,e[d]).length;d++);(e[d]||(e[d]=[])).push(c)}return e}function db(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)hb(e,a[f],e.forwardSegs)}function eb(a){var c,d,e=a.forwardSegs,f=0;if(a.forwardPressure===b){for(c=0;c<e.length;c++)d=e[c],eb(d),f=Math.max(f,1+d.forwardPressure);a.forwardPressure=f}}function fb(a,c,d){var e,f=a.forwardSegs;if(a.forwardCoord===b)for(f.length?(f.sort(jb),fb(f[0],c+1,d),a.forwardCoord=f[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-d)/(c+1),e=0;e<f.length;e++)fb(f[e],0,a.forwardCoord)}function gb(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)e.push(c[d]);return e}function hb(a,b,c){c=c||[];for(var d=0;d<b.length;d++)ib(a,b[d])&&c.push(b[d]);return c}function ib(a,b){return a.end>b.start&&a.start<b.end}function jb(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||kb(a,b)}function kb(a,b){return a.start-b.start||b.end-b.start-(a.end-a.start)||(a.event.title||"").localeCompare(b.event.title)}function lb(c,d,e){function f(b,c){var d=V[b];return a.isPlainObject(d)?N(d,c||e):d}function g(a,b){return d.trigger.apply(d,[a,b||M].concat(Array.prototype.slice.call(arguments,2),[M]))}function h(a){var b=a.source||{};return T(a.startEditable,b.startEditable,f("eventStartEditable"),a.editable,b.editable,f("editable"))&&!f("disableDragging")}function j(a){var b=a.source||{};return T(a.durationEditable,b.durationEditable,f("eventDurationEditable"),a.editable,b.editable,f("editable"))&&!f("disableResizing")}function l(a){R={};var b,c,d=a.length;for(b=0;d>b;b++)c=a[b],R[c._id]?R[c._id].push(c):R[c._id]=[c]}function n(){R={},S={},U=[]}function p(a){return a.end?m(a.end):O(a)}function q(a,b){U.push({event:a,element:b}),S[a._id]?S[a._id].push(b):S[a._id]=[b]}function r(){a.each(U,function(a,b){M.trigger("eventDestroy",b.event,b.event,b.element)})}function s(a,b){b.click(function(c){return b.hasClass("ui-draggable-dragging")||b.hasClass("ui-resizable-resizing")?void 0:g("eventClick",this,a,c)}).bind("contextmenu",function(c){return b.hasClass("ui-draggable-dragging")||b.hasClass("ui-resizable-resizing")?void 0:(g("eventClick",this,a,c),g("eventRightClick",this,a,c))}).hover(function(b){g("eventMouseover",this,a,b)},function(b){g("eventMouseout",this,a,b)})}function t(a,b){v(a,b,"show")}function u(a,b){v(a,b,"hide")}function v(a,b,c){var d,e=S[a._id],f=e.length;for(d=0;f>d;d++)b&&e[d][0]==b[0]||e[d][c]()}function w(a,b,c,d,e,f,h){var i=b.allDay,j=b._id;y(R[j],c,d,e),g("eventDrop",a,b,c,d,e,function(){y(R[j],-c,-d,i),Q(j)},f,h),Q(j)}function x(a,b,c,d,e,f){var h=b._id;z(R[h],c,d),g("eventResize",a,b,c,d,function(){z(R[h],-c,-d),Q(h)},e,f),Q(h)}function y(a,c,d,e){d=d||0;for(var f,g=a.length,h=0;g>h;h++)f=a[h],e!==b&&(f.allDay=e),k(i(f.start,c,!0),d),f.end&&(f.end=k(i(f.end,c,!0),d)),P(f,V)}function z(a,b,c){c=c||0;for(var d,e=a.length,f=0;e>f;f++)d=a[f],d.end=k(i(p(d),b,!0),c),P(d,V)}function A(a){return"object"==typeof a&&(a=a.getDay()),Y[a]}function B(){return W}function C(a,b,c){for(b=b||1;Y[(a.getDay()+(c?b:0)+7)%7];)i(a,b)}function D(){var a=E.apply(null,arguments),b=F(a),c=G(b);return c}function E(a,b){var c=M.getColCnt(),d=_?-1:1,e=_?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);var f=a*c+(b*d+e);return f}function F(a){var b=M.visStart.getDay();return a+=Z[b],7*Math.floor(a/W)+$[(a%W+W)%W]-b}function G(a){var b=m(M.visStart);return i(b,a),b}function H(a){var b=I(a),c=J(b),d=K(c);return d}function I(a){return o(a,M.visStart)}function J(a){var b=M.visStart.getDay();return a+=b,Math.floor(a/7)*W+Z[(a%7+7)%7]-Z[b]}function K(a){var b=M.getColCnt(),c=_?-1:1,d=_?b-1:0,e=Math.floor(a/b),f=(a%b+b)%b*c+d;return{row:e,col:f}}function L(a,b){for(var c=M.getRowCnt(),d=M.getColCnt(),e=[],f=I(a),g=I(b),h=J(f),i=J(g)-1,j=0;c>j;j++){var k=j*d,l=k+d-1,m=Math.max(h,k),n=Math.min(i,l);if(n>=m){var o=K(m),p=K(n),q=[o.col,p.col].sort(),r=F(m)==f,s=F(n)+1==g;e.push({row:j,leftCol:q[0],rightCol:q[1],isStart:r,isEnd:s})}}return e}var M=this;M.element=c,M.calendar=d,M.name=e,M.opt=f,M.trigger=g,M.isEventDraggable=h,M.isEventResizable=j,M.setEventData=l,M.clearEventData=n,M.eventEnd=p,M.reportEventElement=q,M.triggerEventDestroy=r,M.eventElementHandlers=s,M.showEvents=t,M.hideEvents=u,M.eventDrop=w,M.eventResize=x;var O=M.defaultEventEnd,P=d.normalizeEvent,Q=d.reportEventChange,R={},S={},U=[],V=d.options;M.isHiddenDay=A,M.skipHiddenDays=C,M.getCellsPerWeek=B,M.dateToCell=H,M.dateToDayOffset=I,M.dayOffsetToCellOffset=J,M.cellOffsetToCell=K,M.cellToDate=D,M.cellToCellOffset=E,M.cellOffsetToDayOffset=F,M.dayOffsetToDate=G,M.rangeToSegments=L;var W,X=f("hiddenDays")||[],Y=[],Z=[],$=[],_=f("isRTL");!function(){f("weekends")===!1&&X.push(0,6);for(var b=0,c=0;7>b;b++)Z[b]=c,Y[b]=-1!=a.inArray(b,X),Y[b]||($[c]=b,c++);if(W=c,!W)throw"invalid hiddenDays"}()}function mb(){function b(a,b){var c=d(a,!1,!0);ob(c,function(a,b){G(a.event,b)}),t(c,b),ob(c,function(a,b){C("eventAfterRender",a.event,a.event,b)})}function c(a,b,c){var e=d([a],!0,!1),f=[];return ob(e,function(a,d){a.row===b&&d.css("top",c),f.push(d[0])}),f}function d(b,c,d){var f,i,j=X(),m=c?a("<div/>"):j,n=e(b);return g(n),f=h(n),m[0].innerHTML=f,i=m.children(),c&&j.append(i),k(n,i),ob(n,function(a,b){a.hsides=B(b,!0)}),ob(n,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))}),ob(n,function(a,b){a.outerHeight=b.outerHeight(!0)}),l(n,d),n}function e(a){for(var b=[],c=0;c<a.length;c++){var d=f(a[c]);b.push.apply(b,d)}return b}function f(a){for(var b=a.start,c=w(a),d=bb(b,c),e=0;e<d.length;e++)d[e].event=a;return d}function g(a){for(var b=A("isRTL"),c=0;c<a.length;c++){var d=a[c],e=(b?d.isEnd:d.isStart)?V:T,f=(b?d.isStart:d.isEnd)?W:U,g=e(d.leftCol),h=f(d.rightCol);d.left=g,d.outerWidth=h-g}}function h(a){for(var b="",c=0;c<a.length;c++)b+=j(a[c]);return b}function j(a){var b="",c=A("isRTL"),d=a.event,e=d.url,f=["fc-event","fc-event-hori"];D(d)&&f.push("fc-event-draggable"),a.isStart&&f.push("fc-event-start"),a.isEnd&&f.push("fc-event-end"),f=f.concat(d.className),d.source&&(f=f.concat(d.source.className||[]));var g=R(d,A);return b+=e?"<a href='"+O(e)+"'":"<div",b+=" class='"+f.join(" ")+"' style='position:absolute;left:"+a.left+"px;"+g+"'><div class='fc-event-inner'>",!d.allDay&&a.isStart&&(b+="<span class='fc-event-time'>"+O(Y(d.start,d.end,A("timeFormat")))+"</span>"),b+="<span class='fc-event-title'>"+O(d.title||"")+"</span></div>",a.isEnd&&E(d)&&(b+="<div class='ui-resizable-handle ui-resizable-"+(c?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),b+="</"+(e?"a":"div")+">"}function k(b,c){for(var d=0;d<b.length;d++){var e=b[d],f=e.event,g=c.eq(d),h=C("eventRender",f,f,g);h===!1?g.remove():(h&&h!==!0&&(h=a(h).css({position:"absolute",left:e.left}),g.replaceWith(h),g=h),e.element=g)}}function l(a,b){var c=n(a),d=s(),e=[];if(b)for(var f=0;f<d.length;f++)d[f].height(c[f]);for(var f=0;f<d.length;f++)e.push(d[f].position().top);ob(a,function(a,b){b.css("top",e[a.row]+a.top)})}function n(a){for(var b=N(),c=Q(),d=[],e=p(a),f=0;b>f;f++){for(var g=e[f],h=[],i=0;c>i;i++)h.push(0);for(var j=0;j<g.length;j++){var k=g[j];k.top=L(h.slice(k.leftCol,k.rightCol+1));for(var i=k.leftCol;i<=k.rightCol;i++)h[i]=k.top+k.outerHeight}d.push(L(h))}return d}function p(a){var b,c,d,e=N(),f=[];for(b=0;b<a.length;b++)c=a[b],d=c.row,c.element&&(f[d]?f[d].push(c):f[d]=[c]);for(d=0;e>d;d++)f[d]=q(f[d]||[]);return f}function q(a){for(var b=[],c=r(a),d=0;d<c.length;d++)b.push.apply(b,c[d]);return b}function r(a){a.sort(pb);for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&nb(d,b[e]);e++);b[e]?b[e].push(d):b[e]=[d]}return b}function s(){var a,b=N(),c=[];for(a=0;b>a;a++)c[a]=S(a).find("div.fc-day-content > div");return c}function t(a,b){var c=X();ob(a,function(a,c,d){var e=a.event;e._id===b?u(e,c,a):c[0]._fci=d}),y(c,a,u)}function u(a,b,c){D(a)&&z.draggableDayEvent(a,b,c),c.isEnd&&E(a)&&z.resizableDayEvent(a,b,c),H(a,b)}function v(a,b){var c,d=ab();b.draggable({delay:50,opacity:A("dragOpacity"),revertDuration:A("dragRevertDuration"),start:function(e,f){C("eventDragStart",b,a,e,f),J(a,b),d.start(function(d,e,f,g){if(b.draggable("option","revert",!d||!f&&!g),$(),d){var h=cb(e),j=cb(d);c=o(j,h),Z(i(m(a.start),c),i(w(a),c))}else c=0},e,"drag")},stop:function(e,f){d.stop(),$(),C("eventDragStop",b,a,e,f),c?K(this,a,c,0,a.allDay,e,f):(b.css("filter",""),I(a,b))}})}function x(b,d,e){var f=A("isRTL"),g=f?"w":"e",h=d.find(".ui-resizable-"+g),j=!1;P(d),d.mousedown(function(a){a.preventDefault()}).click(function(a){j&&(a.preventDefault(),a.stopImmediatePropagation())}),h.mousedown(function(f){function h(c){C("eventResizeStop",this,b,c),a("body").css("cursor",""),m.stop(),$(),k&&M(this,b,k,0,c),setTimeout(function(){j=!1},0)}if(1==f.which){j=!0;var k,l,m=ab(),n=(N(),Q(),d.css("top")),o=a.extend({},b),p=gb(fb(b.start));_(),a("body").css("cursor",g+"-resize").one("mouseup",h),C("eventResizeStart",this,b,f),m.start(function(d,f){if(d){var h=db(f),j=db(d);if(j=Math.max(j,p),k=eb(j)-eb(h)){o.end=i(F(b),k,!0);var m=l;l=c(o,e.row,n),l=a(l),l.find("*").css("cursor",g+"-resize"),m&&m.remove(),J(b)}else l&&(I(b),l.remove(),l=null);$(),Z(b.start,i(w(b),k))}},f)}})}var z=this;z.renderDayEvents=b,z.draggableDayEvent=v,z.resizableDayEvent=x;var A=z.opt,C=z.trigger,D=z.isEventDraggable,E=z.isEventResizable,F=z.eventEnd,G=z.reportEventElement,H=z.eventElementHandlers,I=z.showEvents,J=z.hideEvents,K=z.eventDrop,M=z.eventResize,N=z.getRowCnt,Q=z.getColCnt,S=(z.getColWidth,z.allDayRow),T=z.colLeft,U=z.colRight,V=z.colContentLeft,W=z.colContentRight,X=(z.dateToCell,z.getDaySegmentContainer),Y=z.calendar.formatDates,Z=z.renderDayOverlay,$=z.clearOverlays,_=z.clearSelection,ab=z.getHoverListener,bb=z.rangeToSegments,cb=z.cellToDate,db=z.cellToCellOffset,eb=z.cellOffsetToDayOffset,fb=z.dateToDayOffset,gb=z.dayOffsetToCellOffset}function nb(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0}return!1}function ob(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.element;e&&b(d,e,c)}}function pb(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)}function qb(){function b(a,b,e){c(),b||(b=i(a,e)),j(a,b,e),d(a,b,e)}function c(a){l&&(l=!1,k(),h("unselect",null,a))}function d(a,b,c,d){l=!0,h("select",null,a,b,c,d)}function e(b){var e=f.cellToDate,h=f.getIsCellAllDay,i=f.getHoverListener(),l=f.reportDayClick;if(1==b.which&&g("selectable")){c(b);var m;i.start(function(a,b){k(),a&&h(a)?(m=[e(b),e(a)].sort(K),j(m[0],m[1],!0)):m=null},b),a(document).one("mouseup",function(a){i.stop(),m&&(+m[0]==+m[1]&&l(m[0],!0,a),d(m[0],m[1],!0,a))})}}var f=this;f.select=b,f.unselect=c,f.reportSelection=d,f.daySelectionMousedown=e;var g=f.opt,h=f.trigger,i=f.defaultSelectionEnd,j=f.renderSelection,k=f.clearSelection,l=!1;g("selectable")&&g("unselectAuto")&&a(document).mousedown(function(b){var d=g("unselectCancel");d&&a(b.target).parents(d).length||c(b)})}function rb(){function b(b,c){var d=f.shift();return d||(d=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),d[0].parentNode!=c[0]&&d.appendTo(c),e.push(d.css(b).show()),d}function c(){for(var a;a=e.shift();)f.push(a.hide().unbind())}var d=this;d.renderOverlay=b,d.clearOverlays=c;var e=[],f=[]}function sb(a){var b,c,d=this;d.build=function(){b=[],c=[],a(b,c)},d.cell=function(a,d){var e,f=b.length,g=c.length,h=-1,i=-1;for(e=0;f>e;e++)if(d>=b[e][0]&&d<b[e][1]){h=e;break}for(e=0;g>e;e++)if(a>=c[e][0]&&a<c[e][1]){i=e;break}return h>=0&&i>=0?{row:h,col:i}:null},d.rect=function(a,d,e,f,g){var h=g.offset();return{top:b[a][0]-h.top,left:c[d][0]-h.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function tb(b){function c(a){ub(a);var c=b.cell(a.pageX,a.pageY);(!c!=!g||c&&(c.row!=g.row||c.col!=g.col))&&(c?(f||(f=c),e(c,f,c.row-f.row,c.col-f.col)):e(c,f),g=c)}var d,e,f,g,h=this;h.start=function(h,i,j){e=h,f=g=null,b.build(),c(i),d=j||"mousemove",a(document).bind(d,c)},h.stop=function(){return a(document).unbind(d,c),g}}function ub(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY)}function vb(a){function c(b){return e[b]=e[b]||a(b)}var d=this,e={},f={},g={};d.left=function(a){return f[a]=f[a]===b?c(a).position().left:f[a]},d.right=function(a){return g[a]=g[a]===b?d.left(a)+c(a).width():g[a]},d.clear=function(){e={},f={},g={}}}var wb=a.fullCalendar={version:"1.6.4"},xb=wb.views={};a.fn.fullCalendar=function(c){if("string"==typeof c){var e,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a.data(this,"fullCalendar");if(d&&a.isFunction(d[c])){var g=d[c].apply(d,f);e===b&&(e=g),"destroy"==c&&a.removeData(this,"fullCalendar")}}),e!==b?e:this}c=c||{};var g=c.eventSources||[];return delete c.eventSources,c.events&&(g.push(c.events),delete c.events),c=a.extend(!0,{},defaults,c.isRTL||c.isRTL===b&&defaults.isRTL?rtlDefaults:{},c),this.each(function(b,e){var f=a(e),h=new d(f,c,g);f.data("fullCalendar",h),h.render()}),this},wb.sourceNormalizers=[],wb.sourceFetchers=[];var yb={dataType:"json",cache:!1},zb=1;wb.addDays=i,wb.cloneDate=m,wb.parseDate=q,wb.parseISO8601=r,wb.parseTime=s,wb.formatDate=t,wb.formatDates=u;var Ab=["sun","mon","tue","wed","thu","fri","sat"],Bb=864e5,Cb=36e5,Db=6e4,Eb={s:function(a){return a.getSeconds()},ss:function(a){return M(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return M(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return M(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return M(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return M(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return M(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return t(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){var b=a.getDate();return b>10&&20>b?"th":["st","nd","rd"][b%10-1]||"th"},w:function(a,b){return b.weekNumberCalculation(a)},W:function(a){return v(a)}};wb.dateFormatters=Eb,wb.applyAll=S,xb.month=U,xb.basicWeek=V,xb.basicDay=W,c({weekMode:"fixed"}),xb.agendaWeek=Z,xb.agendaDay=$,c({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery),function(){var a;a=jQuery,a.bootstrapGrowl=function(b,c){var d,e,f;switch(c=a.extend({},a.bootstrapGrowl.default_options,c),d=a("<div>"),d.attr("class","bootstrap-growl alert"),c.type&&d.addClass("alert-"+c.type),c.allow_dismiss&&d.append('<a class="close" data-dismiss="alert" href="#">&times;</a>'),d.append(b),c.top_offset&&(c.offset={from:"top",amount:c.top_offset}),f=c.offset.amount,a(".bootstrap-growl").each(function(){return f=Math.max(f,parseInt(a(this).css(c.offset.from))+a(this).outerHeight()+c.stackup_spacing)}),e={position:"body"===c.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"},e[c.offset.from]=f+"px",d.css(e),"auto"!==c.width&&d.css("width",c.width+"px"),a(c.ele).append(d),c.align){case"center":d.css({left:"50%","margin-left":"-"+d.outerWidth()/2+"px"});break;case"left":d.css("left","20px");break;default:d.css("right","20px")}return d.fadeIn(),c.delay>0&&d.delay(c.delay).fadeOut(function(){return a(this).alert("close")}),d},a.bootstrapGrowl.default_options={ele:"body",type:"info",offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10}}.call(this),function(){var a=function(a,b){this.$element=$(a),this.options=$.extend({},$.fn.spinner.defaults,b),this.$input=this.$element.find(".spinner-input"),this.$element.on("keyup",this.$input,$.proxy(this.change,this)),this.options.hold?(this.$element.on("mousedown",".spinner-up",$.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup",".spinner-up, .spinner-down",$.proxy(this.stopSpin,this)),this.$element.on("mouseout",".spinner-up, .spinner-down",$.proxy(this.stopSpin,this)),this.$element.on("mousedown",".spinner-down",$.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click",".spinner-up",$.proxy(function(){this.step(!0)},this)),this.$element.on("click",".spinner-down",$.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},this.switches.speed="medium"===this.options.speed?300:"fast"===this.options.speed?100:500,this.lastValue=null,this.render(),this.options.disabled&&this.disable()};a.prototype={constructor:a,render:function(){var a=this.$input.val();a?this.value(a):this.$input.val(this.options.value),this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var a=this.$input.val();a/1?this.options.value=a/1:(a=a.replace(/[^0-9]/g,""),this.$input.val(a),this.options.value=a/1),this.triggerChangedEvent()},stopSpin:function(){clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent()},triggerChangedEvent:function(){var a=this.value();a!==this.lastValue&&(this.lastValue=a,this.$element.trigger("changed",a),this.$element.trigger("change"))},startSpin:function(a){if(!this.options.disabled){var b=this.switches.count;1===b?(this.step(a),b=1):b=3>b?1.5:8>b?2.5:4,this.switches.timeout=setTimeout($.proxy(function(){this.iterator(a)},this),this.switches.speed/b),this.switches.count++}},iterator:function(a){this.step(a),this.startSpin(a)},step:function(a){var b=this.options.value,c=a?this.options.max:this.options.min;if(a?c>b:b>c){var d=b+(a?1:-1)*this.options.step;this.value((a?d>c:c>d)?c:d)}else if(this.options.cycle){var e=a?this.options.min:this.options.max;this.value(e)}},value:function(a){return!isNaN(parseFloat(a))&&isFinite(a)?(a=parseFloat(a),this.options.value=a,this.$input.val(a),this):this.options.value},disable:function(){this.options.disabled=!0,this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")}},$.fn.spinner=function(b,c){var d,e=this.each(function(){var e=$(this),f=e.data("spinner"),g="object"==typeof b&&b;f||e.data("spinner",f=new a(this,g)),"string"==typeof b&&(d=f[b](c))});return void 0===d?e:d},$.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:!0,speed:"medium",disabled:!1},$.fn.spinner.Constructor=a,$(function(){$("body").on("mousedown.spinner.data-api",".spinner",function(){var a=$(this);a.data("spinner")||a.spinner(a.data())})})}();